<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù…Ø±Ø§Ø¬Ø¹Ø© IPv6</title>
  <style>
    :root{
      --bg:#0f172a;        /* slate-900 */
      --card:#111827;      /* gray-900 */
      --ink:#e5e7eb;       /* gray-200 */
      --muted:#9ca3af;     /* gray-400 */
      --brand:#38bdf8;     /* sky-400 */
      --accent:#22c55e;    /* green-500 */
      --warn:#f59e0b;      /* amber-500 */
      --danger:#ef4444;    /* red-500 */
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:linear-gradient(180deg,#0b1220, #0f172a 30%, #0b1220);
      color:var(--ink); font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Naskh Arabic UI", Tahoma, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      min-height:100dvh; display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .app{ width:min(1000px,100%); }
    header{display:flex; gap:12px; align-items:center; justify-content:space-between; margin-bottom:16px}
    header h1{font-size:clamp(18px,3vw,24px); margin:0; letter-spacing:.3px}
    .controls{display:flex; flex-wrap:wrap; gap:8px; align-items:center}
    button{
      background:#0b1220; color:var(--ink); border:1px solid #263042; border-radius:12px;
      padding:10px 14px; cursor:pointer; font-weight:600; transition:.2s transform ease, .2s background ease;
    }
    button:hover{ transform:translateY(-1px); background:#0b1426 }
    button.primary{ border-color:var(--brand) }
    button.good{ border-color:var(--accent) }
    button.bad{ border-color:var(--danger) }
    input[type="number"], input[type="text"]{
      background:#0b1220; color:var(--ink); border:1px solid #263042; border-radius:10px; padding:8px 10px; width:100%;
    }
    .grid{display:grid; grid-template-columns: 1fr; gap:14px}
    .card{ perspective: 1200px; isolation:isolate; height: clamp(280px, 42vh, 420px); background: transparent; border-radius:16px; position:relative; }
    .card-inner{ position:absolute; inset:0; border-radius:16px; transform-style:preserve-3d; transition: transform .5s cubic-bezier(.2,.8,.2,1); }
    .face{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; text-align:center; padding:28px; background: radial-gradient(1200px 400px at 100% 0%, #0b1426, var(--card)); border:1px solid #1f2937; border-radius:16px; backface-visibility:hidden; box-shadow: 0 10px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03); }
    .face.back{ transform: rotateY(180deg); }
    .flipped .card-inner{ transform: rotateY(180deg); }
    .meta{display:flex; align-items:center; gap:10px; opacity:.9; font-size:14px}
    .pill{border:1px dashed #2b3450; padding:4px 10px; border-radius:999px}
    .muted{color:var(--muted)}
    .progress{height:10px; background:#162033; border-radius:999px; overflow:hidden; border:1px solid #263042}
    .bar{height:100%; width:0%; background:linear-gradient(90deg, var(--brand), #60a5fa); transition:width .3s ease}
    .panel{background:#0b1426; border:1px solid #263042; border-radius:16px; padding:16px}
    .small{font-size:12px; opacity:.85}
    .hidden{display:none}
    /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø´Ø±Ø­ */
    .exbox{ margin-top:12px; padding:14px 16px; border-radius:14px; line-height:1.7; border:1px solid #26425a; background:linear-gradient(180deg,#0b1426,#0c162a); box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 24px rgba(0,0,0,.25); }
    .exbox h4{margin:0 0 6px 0; font-size:14px; color:#7dd3fc}
    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background:#0a1220; border:1px solid #263042; border-radius:6px; padding:0 6px}
    /* ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
    .quizbox{ margin-top:12px; padding:16px; border-radius:14px; border:1px solid #334155; background:linear-gradient(180deg,#0c1528,#0f1a30); box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 24px rgba(0,0,0,.25); }
    .row{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    .score{font-weight:700}
    .tag{border:1px solid #2b3450; padding:2px 8px; border-radius:999px; font-size:12px}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>ğŸ“š Ù…Ø±Ø§Ø¬Ø¹Ø© IPv6 â€“ Ù…. Ù†Ø¨ÙŠÙ„ Ø§Ù„Ø´ÙˆÙŠÙƒØ§Ù†</h1>
      <div class="controls">
        <button id="btnFlip" class="primary" title="Ø§Ù„Ù…Ø³Ø·Ø±Ø©: Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø³Ø§ÙØ©">Ø§Ù‚Ù„Ø¨ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© â–¯</button>
        <button id="btnPrev" title="Ø§Ù„Ø³Ù‡Ù… Ø§Ù„Ø£ÙŠÙ…Ù†/Ø§Ù„Ø£ÙŠØ³Ø±">â—€ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</button>
        <button id="btnNext" title="Ø§Ù„Ø³Ù‡Ù… Ø§Ù„Ø£ÙŠÙ…Ù†/Ø§Ù„Ø£ÙŠØ³Ø±">Ø§Ù„ØªØ§Ù„ÙŠ â–¶</button>
        <button id="btnGood" class="good" title="Ø±Ù‚Ù… 1">Ø¹Ø±ÙØªÙ‡Ø§ âœ“</button>
        <button id="btnBad" class="bad" title="Ø±Ù‚Ù… 2">Ù„Ø§ØŒ Ø£Ø¹ÙØ¯Ù‡Ø§ âœ—</button>
        <button id="btnShuffle" title="Ø®Ù„Ø· Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª">ğŸ”€ Ø®Ù„Ø·</button>
        <span class="tag" id="timer" title="Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ" style="margin-inline-start:8px">â±ï¸ â€”</span>
      </div>
    </header>

    <section class="panel" id="studyView">
      <div class="meta" style="margin-bottom:10px">
        <span class="pill" id="deckName">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©: IPv6 â€“ Ø£Ø³Ø¦Ù„Ø© Ù‚ØµÙŠØ±Ø© Ù…Ø¹ Ø´Ø±Ø­</span>
        <span class="muted">(<span id="idx">1</span>/<span id="total">1</span>)</span>
      </div>
      <div class="card" id="card">
        <div class="card-inner" id="cardInner">
          <div class="face front" id="front"></div>
          <div class="face back" id="back"></div>
        </div>
      </div>

      <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø´Ø±Ø­ ÙŠØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ù‚Ù„Ø¨ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© -->
      <div id="ex" class="exbox hidden">
        <h4>Ø´Ø±Ø­ Ù…Ø®ØªØµØ±</h4>
        <div id="exText"></div>
      </div>

      <div style="margin-top:12px" class="progress" aria-label="Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙ‚Ø¯Ù…">
        <div class="bar" id="bar"></div>
      </div>
      <p class="small muted">Ø§Ø®ØªØµØ§Ø±Ø§Øª: Ù…Ø³Ø§ÙØ© (Ù‚Ù„Ø¨)ØŒ Ø§Ù„Ø£Ø³Ù‡Ù… ÙŠÙ…ÙŠÙ†/ÙŠØ³Ø§Ø± (ØªÙ†Ù‚Ù‘Ù„)ØŒ 1 (ØµØ­)ØŒ 2 (Ø¥Ø¹Ø§Ø¯Ø©).</p>
    </section>

    <!-- ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
    <section class="panel quizbox" id="quizSetup">
      <div class="row">
        <strong>ğŸ¯ ÙˆØ¶Ø¹ Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹</strong>
        <span class="muted">â€” Ø§Ø®ØªØ± Ù…Ø¯ØªÙ‡ Ø«Ù… Ø§Ø¨Ø¯Ø£</span>
      </div>
      <div class="row" style="margin-top:8px">
        <label for="mins" class="muted">Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚:</label>
        <input id="mins" type="number" min="1" max="60" value="10" style="width:90px" />
        <button id="btnStartQuiz" class="primary">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
        <span class="muted" id="quizInfo"></span>
      </div>
    </section>

    <section class="panel quizbox hidden" id="quizView">
      <div class="row" style="justify-content:space-between">
        <div>
          <span class="score">Ø§Ù„Ù†ØªÙŠØ¬Ø©: <span id="score">0</span>/<span id="qtotal">0</span></span>
          <span class="tag" style="margin-inline-start:6px">Ø§Ù„Ø³Ø¤Ø§Ù„ <span id="qidx">1</span></span>
        </div>
        <div class="muted">â±ï¸ <span id="quizTimer">â€”</span></div>
      </div>
      <div class="meta" style="margin-top:10px"><span class="pill" id="qFront"></span></div>
      <div class="row" style="margin-top:10px">
        <input id="ansInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨Ø© Ù‚ØµÙŠØ±Ø© (ÙƒÙ„Ù…Ø©/ÙƒÙ„Ù…ØªÙŠÙ†)â€¦" />
        <button id="btnSubmit" class="primary">ØªØ­Ù‚Ù‘Ù‚</button>
        <button id="btnSkip">ØªØ¬Ø§ÙˆØ²</button>
        <div id="tfBtns" class="row hidden">
          <button id="btnTrue" class="good">ØµØ­</button>
          <button id="btnFalse" class="bad">Ø®Ø·Ø£</button>
        </div>
      </div>
      <div id="quizFeedback" class="small" style="margin-top:8px"></div>
    </section>

    <section class="panel hidden" id="quizSummary">
      <h3 style="margin:0">ğŸ“Š Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h3>
      <p class="muted" id="summaryText"></p>
      <div class="row"><button id="btnRetry" class="primary">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button><button id="btnBackStudy">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button></div>
    </section>

    <footer style="margin-top:14px" class="muted small">
      ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¯ÙˆÙ† Ù…ÙƒØªØ¨Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ©. ÙŠØªÙ… Ø­ÙØ¸ ØªÙ‚Ø¯Ù…Ùƒ Ù…Ø­Ù„ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­.
    </footer>
  </div>

  <script>
    // ===== 1) Ø¨Ø·Ø§Ù‚Ø§Øª Ø¨Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ø¶Ø­Ø© ÙˆØ¥Ø¬Ø§Ø¨Ø§Øª Ù‚ØµÙŠØ±Ø© + Ø´Ø±Ø­ =====
    const cards = [
      // Ù…ÙØ§Ù‡ÙŠÙ…
      { front: 'Ù…Ø§ Ø§Ù„Ø·ÙˆÙ„ Ø¨Ø§Ù„Ø¨Øª Ù„Ø¹Ù†ÙˆØ§Ù† IPv6 Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØŸ', back: '128 Ø¨Øª', ex: 'IPv6 ÙŠØ³ØªØ®Ø¯Ù… 128 Ø¨Øª Ù…Ù‚Ø§Ø¨Ù„ 32 Ø¨Øª ÙÙŠ IPv4ØŒ Ù…Ø§ ÙŠÙˆÙÙ‘Ø± ÙØ¶Ø§Ø¡Ù‹ Ù‡Ø§Ø¦Ù„Ù‹Ø§ Ù…Ù† Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†.' },
      { front: 'ÙƒÙŠÙ ØªÙÙƒØªØ¨ Ø¹Ù†Ø§ÙˆÙŠÙ† IPv6 Ù…Ù† Ø­ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª ÙˆØ§Ù„ÙØ§ØµÙ„ØŸ', back: '8 Ù…Ø¬Ù…ÙˆØ¹Ø§Øª', ex: 'Ø«Ù…Ø§Ù†ÙŠ ÙƒØªÙ„ Ù…Ù† Ø£Ø±Ù‚Ø§Ù… Ø³Ø¯Ø§Ø³ÙŠØ© Ø¹Ø´Ø±ÙŠØ© (ÙƒÙ„ ÙƒØªÙ„Ø© 16 Ø¨Øª) ØªÙÙØµÙ„ Ø¨Ù†Ù‚Ø·ØªÙŠÙ† Ù…Ø«Ù„ aaaa:bbbb:...' },
      { front: 'Ù…Ø§ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ø­Ø°Ù Ø§Ù„Ø£ØµÙØ§Ø± Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø© Ø¯Ø§Ø®Ù„ ÙƒÙ„ ÙƒØªÙ„Ø© IPv6ØŸ', back: 'Ù…Ø³Ù…ÙˆØ­', ex: 'ÙŠØ³Ù…Ø­ Ø¨Ø­Ø°Ù Ø§Ù„Ø£ØµÙØ§Ø± Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒØªÙ„Ø© ÙÙ‚Ø·: 0db8 â†’ db8. Ù‡Ø°Ø§ Ù„Ø§ ÙŠØºÙŠÙ‘Ø± Ø§Ù„Ù‚ÙŠÙ…Ø©.' },
      { front: 'Ù‡Ù„ ÙŠÙØ³Ù…Ø­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… :: Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø±Ø© ÙÙŠ Ù†ÙØ³ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŸ', back: 'Ù„Ø§', ex: 'Ø§Ø³ØªØ®Ø¯Ø§Ù… :: Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø±Ø© ÙŠØ³Ø¨Ø¨ ØºÙ…ÙˆØ¶Ù‹Ø§ ÙÙŠ Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªÙ„ Ø§Ù„ØµÙØ±ÙŠØ©Ø› Ù„Ø°Ù„Ùƒ ÙŠÙØ³Ù…Ø­ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·.' },
      { front: 'Ù…Ø§ Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ Ø¨ÙŠÙ† Unicast ÙˆAnycast ÙÙŠ IPv6ØŸ (Ù…Ù† Ù†Ø§Ø­ÙŠØ© Ø§Ù„Ø¥ÙŠØµØ§Ù„)', back: 'Ø§Ù„Ø£Ù‚Ø±Ø¨', ex: 'Ø§Ù„Ù€Anycast ÙŠÙˆØ¬Ù‘Ù‡ Ø§Ù„Ø­Ø²Ù…Ø© Ø¥Ù„Ù‰ Ø£Ù‚Ø±Ø¨ ÙˆØ§Ø¬Ù‡Ø© ØªØ­Ù…Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø°Ø§ØªÙ‡ ÙˆÙÙ‚ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ØŒ Ø¨ÙŠÙ†Ù…Ø§ Unicast ÙŠØ°Ù‡Ø¨ Ù„ÙˆØ§Ø¬Ù‡Ø© Ù…Ø­Ø¯Ø¯Ø© ÙˆØ­ÙŠØ¯Ø©.' },
      { front: 'Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Broadcast ÙÙŠ IPv6 ÙƒÙ…Ø§ ÙÙŠ IPv4ØŸ', back: 'Ù„Ø§', ex: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø« Ø¹Ø§Ù… ÙÙŠ IPv6Ø› ØªÙØ³ØªØ®Ø¯Ù… Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Multicast Ø¨Ø¯Ù„Ù‹Ø§ Ù…Ù†Ù‡ Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¶Ø¬ÙŠØ¬ Ø§Ù„Ø´Ø¨ÙƒÙŠ.' },

      // Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ù„Ø¨Ø§Ø¯Ø¦Ø§Øª
      { front: 'Ù…Ø§ Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø© Ø§Ù„ØªÙŠ ØªÙ…ÙŠÙ‘Ø² Ø¹Ù†Ø§ÙˆÙŠÙ† Linkâ€‘LocalØŸ', back: 'fe80::/10', ex: 'ØµØ§Ù„Ø­Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙˆØµÙ„Ø© ÙÙ‚Ø·Ø› ØªÙÙ†Ø´Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ ÙˆØªÙØ³ØªØ®Ø¯Ù… Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬ÙŠØ±Ø§Ù† ÙˆØ§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©.' },
      { front: 'Ù…Ø§ Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Global UnicastØŸ', back: '2000::/3', ex: 'Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ (Ù…Ø´Ø§Ø¨Ù‡Ø© Ù„Ù„Ø¹Ø§Ù…Ø© ÙÙŠ IPv4).' },
      { front: 'Ù…Ø§ Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø© Ø§Ù„ØªÙŠ ØªÙØ³ØªØ®Ø¯Ù… Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Unique LocalØŸ', back: 'fc00::/7', ex: 'Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯Ø§Ø®Ù„ÙŠ (Ù…Ø´Ø§Ø¨Ù‡Ø© Ù„Ù„Ø®ØµÙˆØµÙŠØ© ÙÙŠ IPv4). ØºÙŠØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¹Ù…ÙˆÙ…Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.' },
      { front: 'Ù…Ø§ Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø© Ø§Ù„ØªÙŠ ØªÙØ³ØªØ®Ø¯Ù… Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† MulticastØŸ', back: 'ff00::/8', ex: 'ØªÙØ±Ø³Ù„ Ø§Ù„Ø­Ø²Ù…Ø© Ù„ÙƒÙ„ Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¨Ø¯Ù„ Ø¹Ù†ÙˆØ§Ù† ÙˆØ­ÙŠØ¯.' },
      { front: 'Ù…Ø§ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø®ØµÙ‘Øµ Ù„Ù„Ø­Ù„Ù‚Ø© (Loopback) ÙÙŠ IPv6ØŸ', back: '::1', ex: 'ÙŠØºÙ†ÙŠ Ø¹Ù† 127.0.0.1 ÙÙŠ IPv4 ÙˆÙŠØ¹Ù†ÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø² Ù†ÙØ³Ù‡.' },
      { front: 'Ù…Ø§ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ØºÙŠØ± Ø§Ù„Ù…Ø¹ÙŠÙ‘Ù† (Unspecified address) ÙÙŠ IPv6ØŸ', back: '::', ex: 'ÙŠÙØ³ØªØ®Ø¯Ù… Ù…Ø¤Ù‚ØªÙ‹Ø§ Ù„Ù„Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰ Ø¹Ø¯Ù… Ø§Ù…ØªÙ„Ø§Ùƒ Ø¹Ù†ÙˆØ§Ù† Ø¨Ø¹Ø¯ (Ù…Ø«Ù„Ø§Ù‹ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©).' },
      { front: 'Ù…Ø§ Ù†Ø·Ø§Ù‚ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ Ø§Ù„Ù…ÙØ³ØªØ®Ø¯Ù… Ù„Ù„Ø£Ù…Ø«Ù„Ø© ÙÙŠ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ØŸ', back: '2001:db8::/32', ex: 'Reserved Ù„Ù„ØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ù„Ø£Ù…Ø«Ù„Ø© ÙÙŠ Ø§Ù„ÙƒØªØ¨ ÙˆØ§Ù„ÙˆØ«Ø§Ø¦Ù‚ ÙˆØ§Ù„Ù…Ø¹Ø§ÙŠÙŠØ±.' },

      // ØªØ±ÙˆÙŠØ³Ø© IPv6
      { front: 'Ù…Ø§ Ù‚ÙŠÙ…Ø© Ø­Ù‚Ù„ Version ÙÙŠ ØªØ±ÙˆÙŠØ³Ø© IPv6ØŸ', back: '6', ex: 'ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù†Ø³Ø®Ø©Ø› Ù‚ÙŠÙ…ØªÙ‡ 6 Ø¯Ø§Ø¦Ù…Ù‹Ø§ ÙÙŠ IPv6.' },
      { front: 'Ù…Ø§ ÙˆØ¸ÙŠÙØ© Ø­Ù‚Ù„ Traffic Class ÙÙŠ IPv6 Ø¨Ø§Ø®ØªØµØ§Ø±ØŸ', back: 'QoS', ex: 'Ù…Ù…Ø§Ø«Ù„ Ù„ÙÙƒØ±Ø© DSCP/ToS Ù„ØªØ­Ø¯ÙŠØ¯ Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ù…Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯Ø© Ø§Ù„Ø®Ø¯Ù…Ø©.' },
      { front: 'Ù…Ø§ Ø§Ù„ØºØ±Ø¶ Ù…Ù† Ø­Ù‚Ù„ Flow LabelØŸ', back: 'ØªØ¯ÙÙ‘Ù‚', ex: 'ØªØ¹Ø±ÙŠÙ ØªØ¯ÙÙ‘Ù‚ Ù…Ø¹ÙŠÙ† Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…ØªØ³Ù‚Ø© Ø¹Ø¨Ø± Ø§Ù„Ø·Ø±ÙŠÙ‚ (Ù‚Ø¯ ØªØ³ØªØ®Ø¯Ù…Ù‡ ØªØ·Ø¨ÙŠÙ‚Ø§Øª QoS Ù…ØªÙ‚Ø¯Ù…Ø©).' },
      { front: 'Ù…Ø§Ø°Ø§ ÙŠØ¹Ø¨Ù‘Ø± Ø­Ù‚Ù„ Payload Length ÙÙŠ IPv6ØŸ', back: 'Ø§Ù„Ø­Ù…ÙˆÙ„Ø©', ex: 'Ø·ÙˆÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„ØªØ±ÙˆÙŠØ³Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ù„Ø§ ÙŠØ´Ù…Ù„ ØªØ±ÙˆÙŠØ³Ø© IPv6 Ù†ÙØ³Ù‡Ø§).' },
      { front: 'Ø¥Ù„Ù‰ Ù…Ø§Ø°Ø§ ÙŠØ´ÙŠØ± Ø­Ù‚Ù„ Next Header ÙÙŠ IPv6ØŸ', back: 'Ø§Ù„ØªØ§Ù„ÙŠØ©', ex: 'Ù†ÙˆØ¹ Ø§Ù„ØªØ±ÙˆÙŠØ³Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©: TCPØŒ UDPØŒ Ø£Ùˆ ØªØ±ÙˆÙŠØ³Ø© Ø§Ù…ØªØ¯Ø§Ø¯ IPv6.' },
      { front: 'Ù…Ø§ Ø§Ù„Ù…ÙƒØ§ÙØ¦ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ Ù„Ù€ TTL ÙÙŠ IPv6ØŸ', back: 'Hop Limit', ex: 'ÙŠØ­Ø¯Ù‘Ø¯ Ø£Ù‚ØµÙ‰ Ø¹Ø¯Ø¯ Ù‚ÙØ²Ø§Øª Ù„Ù„Ø­Ø²Ù…Ø© Ù‚Ø¨Ù„ Ø¥Ø³Ù‚Ø§Ø·Ù‡Ø§.' },

      // Ø§Ù„ØªÙ‚Ø³ÙŠÙ… ÙˆØ§Ù„Ø¹Ù†ÙˆÙ†Ø©
      { front: 'Ù…Ø§ Ø·ÙˆÙ„ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„ÙØ±Ø¹ÙŠØ© Ø§Ù„Ø£ÙƒØ«Ø± Ø´ÙŠÙˆØ¹Ù‹Ø§ ÙÙŠ IPv6ØŸ', back: '/64', ex: 'Ø£ÙØ¶Ù„ Ù…Ù…Ø§Ø±Ø³Ø©: /64 Ø¨Ø­ÙŠØ« ÙŠÙƒÙˆÙ† Ù†ØµÙ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù„Ù„Ø´Ø¨ÙƒØ© ÙˆÙ†ØµÙÙ‡ Ù„Ù…Ø¹Ø±Ù‘Ù Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©.' },
      { front: 'ÙƒÙ… Ø¨Øª ØªÙØ³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯Ø© Ù„Ø¨Ø§Ø¯Ø¦Ø© Ø§Ù„Ø´Ø¨ÙƒØ© Ø¶Ù…Ù† /64ØŸ', back: '64', ex: 'Ø§Ù„Ù€ 64 Ø¨Øª Ø§Ù„Ø¹Ù„ÙŠØ§ ØªÙ…Ø«Ù„ Ø¨Ø§Ø¯Ø¦Ø© Ø§Ù„Ø´Ø¨ÙƒØ©.' },
      { front: 'ÙƒÙ… Ø¨Øª ØªÙØ³ØªØ®Ø¯Ù… Ù„Ù…Ø¹Ø±Ù‘Ù Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¶Ù…Ù† /64ØŸ', back: '64', ex: 'Ø§Ù„Ù€ 64 Ø¨Øª Ø§Ù„Ø¯Ù†ÙŠØ§ Ù‡ÙŠ Ù…Ø¹Ø±Ù‘Ù Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (Interface ID).' },
      { front: 'Ù…Ø§ Ø§Ù„Ø·Ø±ÙŠÙ‚ØªØ§Ù† Ø§Ù„Ø´Ø§Ø¦Ø¹ØªØ§Ù† Ù„ØªÙˆÙ„ÙŠØ¯ Ù…Ø¹Ø±Ù‘Ù Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©ØŸ', back: 'SLAAC/EUIâ€‘64', ex: 'SLAAC ÙŠÙˆÙ„Ø¯ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ RAØ› ÙˆEUIâ€‘64 ÙŠØ¨Ù†ÙŠ 64 Ø¨Øª Ù…Ù† MAC.' },

      // NDP ÙˆSLAAC
      { front: 'Ø£ÙŠ Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ ÙŠØ­Ù„Ù‘ Ù…Ø­Ù„ ARP ÙÙŠ Ø¨ÙŠØ¦Ø§Øª IPv6ØŸ', back: 'NDP', ex: 'Neighbor Discovery Protocol ÙŠØ¹Ù…Ù„ Ø¹Ø¨Ø± ICMPv6.' },
      { front: 'Ø¶Ù…Ù† Ø£ÙŠ Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ ØªØ£ØªÙŠ Ø±Ø³Ø§Ø¦Ù„ NDPØŸ', back: 'ICMPv6', ex: 'Ø±Ø³Ø§Ø¦Ù„ Ù…Ø«Ù„ RS/RA ÙˆNS/NA Ø¬Ø²Ø¡ Ù…Ù† ICMPv6.' },
      { front: 'Ù…Ø§ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙŠ ÙŠØ±Ø³Ù„Ù‡Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ø·Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ù…ÙˆØ¬Ù‘Ù‡Ø§ØªØŸ', back: 'RS', ex: 'Router Solicitation ØªØ·Ù„Ø¨ Ù…Ù† Ø§Ù„Ø±Ø§ÙˆØªØ± Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª.' },
      { front: 'Ù…Ø§ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙŠ ÙŠØ¹Ù„Ù† ÙÙŠÙ‡Ø§ Ø§Ù„Ù…ÙˆØ¬Ù‘Ù‡ Ø¹Ù† Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø§Øª ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŸ', back: 'RA', ex: 'Router Advertisement ØªØªØ¶Ù…Ù† Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø§Øª ÙˆØ®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ù…Ø«Ù„ SLAAC.' },
      { front: 'Ø¹Ù„Ù‰ Ø£ÙŠ Ø±Ø³Ø§Ù„Ø© ÙŠØ¹ØªÙ…Ø¯ SLAAC Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ØŸ', back: 'RA', ex: 'ÙŠÙ‚Ø±Ø£ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø®ÙŠØ§Ø±Ø§Øª RA Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø´Ø¨ÙƒØ© Ø¯ÙˆÙ† DHCP.' },
      { front: 'Ù…Ø§ Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ Ù„Ù€ NS/NA Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨Ù€ ARPØŸ', back: 'Ø§Ø³ØªØ¹Ù„Ø§Ù…/Ø±Ø¯', ex: 'NS = Ø§ÙƒØªØ´Ø§Ù (Ø§Ø³ØªØ¹Ù„Ø§Ù…)ØŒ NA = Ø¥Ø¹Ù„Ø§Ù† (Ø±Ø¯) Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø·Ø¨Ù‚Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©.' },

      // ØªØ´ØºÙŠÙ„ ÙˆØ£ÙˆØ§Ù…Ø±
      { front: 'Ù…Ø§ Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ù…Ø®ØªØµØ± Ù„Ø¹Ø±Ø¶ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø´Ø¨ÙƒØ© Ø¹Ù„Ù‰ Ù„ÙŠÙ†ÙƒØ³ØŸ', back: 'ip a', ex: 'Ø§Ø®ØªØµØ§Ø± Ù„Ù„Ø£Ù…Ø± ip addrØ› ÙŠØ¹Ø±Ø¶ Ø¹Ù†Ø§ÙˆÙŠÙ† v4 Ùˆv6 Ù„ÙƒÙ„ ÙˆØ§Ø¬Ù‡Ø©.' },
      { front: 'Ù…Ø§ Ø§Ù„Ø£Ù…Ø± Ù„Ø¹Ø±Ø¶ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ© Ø¹Ù„Ù‰ ÙˆÙŠÙ†Ø¯ÙˆØ²ØŸ', back: 'ipconfig', ex: 'ÙŠØ¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆÙ‘Ù„Ø§Øª Ø¨Ù…Ø§ ÙÙŠÙ‡Ø§ Ø¹Ù†Ø§ÙˆÙŠÙ† IPv6.' },
      { front: 'Ù…Ø§ Ø£Ù…Ø± Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† IPv6 Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©ØŸ', back: 'ping -6', ex: 'ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© ÙŠÙˆØ¬Ø¯ ping6 Ø£ÙŠØ¶Ù‹Ø§Ø› Ø§Ù„Ù…Ù‡Ù… ØªØ­Ø¯ÙŠØ¯ Ø¹Ø§Ø¦Ù„Ø© Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ IPv6.' },
      { front: 'Ù…Ø§ Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„ØªÙŠ ØªÙÙ…ÙƒÙ‘Ù† Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¨ÙŠÙ† IPv6 ÙˆIPv4 Ø¯ÙˆÙ† ØªØ±Ø¬Ù…Ø© Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŸ', back: 'NAT64', ex: 'ØªØ±Ø¬Ù…Ø© Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨ÙŠÙ† v6 Ùˆv4 Ø¨Ø­ÙŠØ« ØªØªÙ…ÙƒÙ‘Ù† Ø¹ÙÙ‚Ø¯ v6 Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ø®Ø¯Ù…Ø§Øª v4.' },

      // Ø£Ù…Ø«Ù„Ø© ØªØ­ÙˆÙŠÙ„/Ø§Ø®ØªØµØ§Ø±
      { front: 'Ø§Ø®ØªØµØ± Ø§Ù„Ø¹Ù†ÙˆØ§Ù† 2001:0db8:0000:0000:0000:ff00:0042:8329 Ø¥Ù„Ù‰ Ø£Ù‚ØµØ± ØµÙŠØºØ© ØµØ­ÙŠØ­Ø©.', back: '2001:db8::ff00:42:8329', ex: 'Ø­Ø°Ù Ø§Ù„Ø£ØµÙØ§Ø± Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒØªÙ„ + Ø¶ØºØ· Ø³Ù„Ø³Ù„Ø© Ø§Ù„ÙƒØªÙ„ Ø§Ù„ØµÙØ±ÙŠØ© Ø§Ù„ÙˆØ³Ø·Ù‰ Ø¥Ù„Ù‰ ::.' },
      { front: 'ÙˆØ³Ù‘Ø¹ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø®ØªØµØ± 2001:db8::1 Ù„ÙŠØ¸Ù‡Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙØ§Ø± Ø§Ù„Ù…Ø®ÙÙŠØ©.', back: '2001:0db8:0000:0000:0000:0000:0000:0001', ex: 'ØªÙˆØ³ÙŠØ¹ :: Ù„Ø¥Ø¸Ù‡Ø§Ø± ÙƒÙ„ Ø§Ù„ÙƒØªÙ„ Ø§Ù„ØµÙØ±ÙŠØ© Ø§Ù„Ù…Ø®ÙÙŠØ© ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø£ØµÙØ§Ø± Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø©.' }
    ];

    // ===== 2) Ø¹Ù†Ø§ØµØ± DOM =====
    const els = {
      front: document.getElementById('front'),
      back: document.getElementById('back'),
      card: document.getElementById('card'),
      idx: document.getElementById('idx'),
      total: document.getElementById('total'),
      bar: document.getElementById('bar'),
      btnFlip: document.getElementById('btnFlip'),
      btnPrev: document.getElementById('btnPrev'),
      btnNext: document.getElementById('btnNext'),
      btnGood: document.getElementById('btnGood'),
      btnBad: document.getElementById('btnBad'),
      btnShuffle: document.getElementById('btnShuffle'),
      exBox: document.getElementById('ex'),
      exText: document.getElementById('exText'),
      timer: document.getElementById('timer'),
      // quiz
      mins: document.getElementById('mins'),
      btnStartQuiz: document.getElementById('btnStartQuiz'),
      quizInfo: document.getElementById('quizInfo'),
      quizSetup: document.getElementById('quizSetup'),
      quizView: document.getElementById('quizView'),
      qFront: document.getElementById('qFront'),
      qidx: document.getElementById('qidx'),
      qtotal: document.getElementById('qtotal'),
      score: document.getElementById('score'),
      ansInput: document.getElementById('ansInput'),
      btnSubmit: document.getElementById('btnSubmit'),
      btnSkip: document.getElementById('btnSkip'),
      quizFeedback: document.getElementById('quizFeedback'),
      quizTimer: document.getElementById('quizTimer'),
      tfBtns: document.getElementById('tfBtns'),
      btnTrue: document.getElementById('btnTrue'),
      btnFalse: document.getElementById('btnFalse'),
      quizSummary: document.getElementById('quizSummary'),
      summaryText: document.getElementById('summaryText'),
      btnRetry: document.getElementById('btnRetry'),
      btnBackStudy: document.getElementById('btnBackStudy'),
      studyView: document.getElementById('studyView'),
    };

    // ===== 3) Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© =====
    let i = 0;
    const STORAGE_KEY = 'ipv6-known-v4';
    let known = new Set(JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]'));

    function updateExplain(){
      const flipped = els.card.classList.contains('flipped');
      const hasEx = !!cards[i].ex;
      if(flipped && hasEx){ els.exText.textContent = cards[i].ex; els.exBox.classList.remove('hidden'); }
      else { els.exBox.classList.add('hidden'); els.exText.textContent = ''; }
    }
    function render(){
      els.total.textContent = cards.length;
      els.idx.textContent = i + 1;
      els.front.textContent = cards[i].front;
      els.back.textContent  = cards[i].back;
      const progress = (known.size / cards.length) * 100; els.bar.style.width = progress + '%';
      updateExplain();
    }
    function flip(){ els.card.classList.toggle('flipped'); updateExplain(); }
    function next(){ i = (i + 1) % cards.length; els.card.classList.remove('flipped'); render(); }
    function prev(){ i = (i - 1 + cards.length) % cards.length; els.card.classList.remove('flipped'); render(); }
    function markKnown(){ known.add(i); localStorage.setItem(STORAGE_KEY, JSON.stringify([...known])); next(); }
    function markUnknown(){ known.delete(i); localStorage.setItem(STORAGE_KEY, JSON.stringify([...known])); next(); }
    function shuffle(){
      for(let j = cards.length - 1; j > 0; j--){ const k = Math.floor(Math.random() * (j + 1)); [cards[j], cards[k]] = [cards[k], cards[j]]; }
      i = 0; els.card.classList.remove('flipped'); render();
    }

    els.btnFlip.addEventListener('click', flip);
    els.btnNext.addEventListener('click', next);
    els.btnPrev.addEventListener('click', prev);
    els.btnGood.addEventListener('click', markKnown);
    els.btnBad.addEventListener('click', markUnknown);
    els.btnShuffle.addEventListener('click', shuffle);

    document.addEventListener('keydown', (e)=>{
      if(e.code === 'Space'){ e.preventDefault(); flip(); }
      else if(e.key === 'ArrowRight'){ next(); }
      else if(e.key === 'ArrowLeft'){ prev(); }
      else if(e.key === '1'){ markKnown(); }
      else if(e.key === '2'){ markUnknown(); }
    });

    // ===== 4) ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± =====
    let quiz = { order: [], idx: 0, score: 0, total: 0, running: false, endAt: 0, tHandle: null };

    function normalize(s){
      return (s||'')
        .toString()
        .trim()
        .toLowerCase()
        .replace(/[\u200f\u200e]/g,'') // Ø¹Ù„Ø§Ù…Ø§Øª Ø§ØªØ¬Ø§Ù‡
        .replace(/[\u0610-\u061a\u064b-\u065f\u06d6-\u06ed]/g,'') // ØªØ´ÙƒÙŠÙ„
        .replace(/[â€“â€”âˆ’]/g,'-')
        .replace(/\s+/g,' ');
    }

    function isTFAnswer(ans){
      const a = normalize(ans);
      return a === 'ØµØ­' || a === 'Ø®Ø·Ø£' || a === 'ØµØ­/Ø®Ø·Ø£';
    }

    function startTimer(mins){
      const ms = mins*60*1000; quiz.endAt = Date.now()+ms; updateTimer();
      quiz.tHandle = setInterval(updateTimer, 250);
    }
    function stopTimer(){ if(quiz.tHandle){ clearInterval(quiz.tHandle); quiz.tHandle=null; } els.quizTimer.textContent='â€”'; }
    function updateTimer(){
      const remain = Math.max(0, quiz.endAt - Date.now());
      const m = Math.floor(remain/60000); const s = Math.floor((remain%60000)/1000);
      els.quizTimer.textContent = `${m}:${String(s).padStart(2,'0')}`;
      els.timer.textContent = `â±ï¸ ${m}:${String(s).padStart(2,'0')}`;
      if(remain<=0){ finishQuiz(); }
    }

    function show(el){ el.classList.remove('hidden'); }
    function hide(el){ el.classList.add('hidden'); }

    function beginQuiz(){
      // Ø¥Ø¹Ø¯Ø§Ø¯
      quiz.order = Array.from(cards.keys());
      for(let j = quiz.order.length-1; j>0; j--){ const k = Math.floor(Math.random()*(j+1)); [quiz.order[j], quiz.order[k]] = [quiz.order[k], quiz.order[j]]; }
      quiz.idx = 0; quiz.score = 0; quiz.total = quiz.order.length; quiz.running = true; els.qtotal.textContent = quiz.total;
      els.score.textContent = '0'; els.qidx.textContent = '1'; els.quizFeedback.textContent = '';
      // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª
      hide(els.quizSetup); show(els.quizView); hide(els.quizSummary); hide(els.studyView);
      loadQuestion();
      const mins = Math.max(1, Math.min(60, parseInt(els.mins.value||'10',10)));
      startTimer(mins);
      els.quizInfo.textContent = `ØªÙ… Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù€ ${mins} Ø¯Ù‚ÙŠÙ‚Ø©`;
    }

    function loadQuestion(){
      const idx = quiz.order[quiz.idx]; const c = cards[idx];
      els.qFront.textContent = c.front;
      els.ansInput.value=''; els.ansInput.focus();
      // Ø¥Ù† ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØµØ­/Ø®Ø·Ø£ ÙˆÙÙ‚Ø·
      const b = normalize(c.back);
      if(b === 'ØµØ­' || b === 'Ø®Ø·Ø£'){ show(els.tfBtns); } else { hide(els.tfBtns); }
    }

    function checkAnswer(userAns){
      const idx = quiz.order[quiz.idx]; const c = cards[idx];
      const a = normalize(userAns);
      const b = normalize(c.back);
      let ok = false;
      // Ù…Ø·Ø§Ø¨Ù‚Ø© Ø¨Ø³ÙŠØ·Ø© Ù…Ø¹ Ø¨Ø¹Ø¶ Ø§Ù„Ø¨Ø¯Ø§Ø¦Ù„ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
      const synonyms = {
        'ip a':['ip a','ip addr','ip address','ip   a'],
        'ping -6':['ping -6','ping6'],
        'qos':['qos','dscp','tos'],
        'hop limit':['hop limit','ttl'],
        'slaac/euiâ€‘64':['slaac/euiâ€‘64','slaac/eui-64','slaac','eui-64','euiâ€‘64'],
        '2001:db8::/32':['2001:db8::/32','db8 /32','ØªÙˆØ«ÙŠÙ‚']
      };
      function matchSyn(b, a){
        for(const key in synonyms){ if(b===key){ if(synonyms[key].includes(a)) return true; } }
        return false;
      }
      ok = (a === b) || matchSyn(b,a);

      if(ok){ quiz.score++; els.quizFeedback.innerHTML = 'âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©'; }
      else{
        els.quizFeedback.innerHTML = `âŒ Ø¥Ø¬Ø§Ø¨Ø© ØºÙŠØ± Ø¯Ù‚ÙŠÙ‚Ø© â€” Ø§Ù„ØµØ­ÙŠØ­: <span class="kbd">${c.back}</span>` + (c.ex? `<br/><span class="small muted">${c.ex}</span>`:'');
      }
      els.score.textContent = String(quiz.score);
      // Ø§Ù„ØªØ§Ù„ÙŠ
      quiz.idx++;
      if(quiz.idx >= quiz.total){ finishQuiz(); }
      else { els.qidx.textContent = String(quiz.idx+1); loadQuestion(); }
    }

    function finishQuiz(){
      if(!quiz.running) return;
      quiz.running = false; stopTimer();
      hide(els.quizView); show(els.quizSummary);
      const percent = Math.round((quiz.score/quiz.total)*100);
      els.summaryText.innerHTML = `Ø£Ù†Ù‡ÙŠØª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: <strong>${quiz.score}</strong> Ù…Ù† <strong>${quiz.total}</strong> â€” Ø§Ù„Ø¯Ø±Ø¬Ø©: <strong>${percent} / 100</strong>`;
    }

    // Ø±ÙˆØ§Ø¨Ø· Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
    els.btnStartQuiz.addEventListener('click', beginQuiz);
    els.btnSubmit.addEventListener('click', ()=>{ checkAnswer(els.ansInput.value); });
    els.btnSkip.addEventListener('click', ()=>{ checkAnswer('___'); });
    els.btnTrue.addEventListener('click', ()=> checkAnswer('ØµØ­'));
    els.btnFalse.addEventListener('click', ()=> checkAnswer('Ø®Ø·Ø£'));
    els.btnRetry.addEventListener('click', ()=>{ show(els.quizSetup); hide(els.quizSummary); hide(els.studyView); });
    els.btnBackStudy.addEventListener('click', ()=>{ show(els.studyView); hide(els.quizSetup); hide(els.quizSummary); stopTimer(); });

    // ===== 5) Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Console =====
    (function selfTests(){
      const tests = [];
      function t(name, fn){ try{ fn(); tests.push({name, ok:true}); } catch(e){ tests.push({name, ok:false, msg:e.message}); } }
      t('cards: Ù…ØµÙÙˆÙØ© ØºÙŠØ± ÙØ§Ø±ØºØ©', ()=>{ if(!Array.isArray(cards) || cards.length < 10) throw new Error('Ù‚Ù„ÙŠÙ„Ø©/ØºÙŠØ± Ù…ØµÙÙˆÙØ©'); });
      t('ÙƒÙ„ Ø¨Ø·Ø§Ù‚Ø© ØªØ­ØªÙˆÙŠ front/back', ()=>{ cards.forEach(c=>{ if(typeof c.front!== 'string' || typeof c.back!=='string') throw new Error('Ù†ÙˆØ¹ ØºÙŠØ± Ù†ØµÙŠ'); }); });
      t('ex Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„ÙƒÙ† ØµØ­ÙŠØ­ Ø§Ù„Ù†ÙˆØ¹ Ø¥Ù† ÙˆØ¬Ø¯', ()=>{ cards.forEach(c=>{ if(c.ex!==undefined && typeof c.ex!=='string') throw new Error('ex Ù„ÙŠØ³ Ù†ØµÙ‹Ø§'); }); });
      t('localStorage ÙŠØ¹Ù…Ù„', ()=>{ localStorage.setItem('__t','1'); if(localStorage.getItem('__t')!=='1') throw new Error('ØªØ¹Ø°Ù‘Ø±'); localStorage.removeItem('__t'); });
      console.log('%c[Flashcards IPv6] Self-tests:', 'color:#7dd3fc');
      tests.forEach(r=> console.log(r.ok ? 'âœ… '+r.name : 'âŒ '+r.name+' â€” '+r.msg));
    })();

    // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø±Ø¶
    render();
  </script>
</body>
</html>
